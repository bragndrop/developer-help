frame_data["service-worker"] = {"xml":"<div title=\"service-worker\"><div class=\"components\"><div title=\"service-worker-component\">\n    <div class=\"allowed-XSS-code\" title=\"Allow service-worker-component when filtering for XSS\">\n        <script>\n            allowedXSS[\"tags\"].push(\"service-worker-component\");\n        </script>\n    </div>\n    <div class=\"runOnLoad\">\n        <script>\n\n            if (editFrameContent().find('service-worker-component').length == 0){\n\n                editFrameContent().find(\"body\").append('<service-worker-component id=\"service-worker\"><div><select class=\"service-worker-enabled\" data-value=\"yes\"></select></div></service-worker-component>');\n\n            }else{\n\n                editFrameContent().find(\"service-worker-component\").find(\"label, small, .sw-preview-message, .sw-code-template\").remove();\n                editFrameContent().find(\"service-worker-component\").find(\"input, select\").removeAttr(\"id\");\n                editFrameContent().find(\"service-worker-component\").find(\"select\").each(function() {\n                    $(this).html(\"\");\n                }); \n                editFrameContent().find(\"service-worker-component\").find(\"input[placeholder]\").removeAttr(\"placeholder\");\n            }\n\n            tagReName(\"Service Worker\", \"service-worker-component\");\n            tagReName(\"Enable Service Worker\", \".service-worker-enabled\");\n\n            designSetting(\"noCopy\", \"service-worker-component, service-worker-component input, service-worker-component select\");\n            designSetting(\"notDraggable\", \"service-worker-component, service-worker-component input, service-worker-component select\");\n            designSetting(\"notDroppable\", \"service-worker-component, service-worker-component input, service-worker-component select\");\n\n            designSetting(\"noRemove\", \"service-worker-component, service-worker-component input, service-worker-component select\");\n            designSetting(\"noMove\", \"service-worker-component input, service-worker-component select\");\n            designSetting(\"disableCustomButtons\", \"service-worker-component input, service-worker-component select\");\n\n            designSetting(\"dontAddTextTo\", \"service-worker-component label, service-worker-component button\");\n\n            designSetting(\"unTouchElement\", \"service-worker-component div, service-worker-component label, service-worker-component label *, service-worker-component small, service-worker-component button, service-worker-component span, service-worker-component br, service-worker-component pre\");\n\n\n            designSetting(\"hiddenContent\", \"service-worker-component\");\n\n            designSetting(\"disablePropInspector\", \"service-worker-component, service-worker-component *\");\n\n            editFrameContent().find('body').on('click', 'service-worker-component .sw-preview-message span', function() {\n                $(\"#previewDesign\").click();\n                if ($(\"#livePreview\").hasClass(\"live-on\") == false){\n                    if ($(\"#livePreview\").hasClass(\"hideme\") == false){\n                        setTimeout(function(){ \n                            $(\"#livePreview\").click();\n                        }, 200);\n                    }\n                }\n            });\n\n            function showHideServiceWorkerMessages(val){\n\n                var swComponents = editFrameContent().find(\"service-worker-component\").find(\".sw-preview-message, .sw-code-template\");\n\n                if (val == \"yes\"){\n                    swComponents.removeClass(\"hideme\");\n                }else{\n                    swComponents.addClass(\"hideme\");\n\n                    var swCode = \"importScripts('https://editor.bragndrop.com/assets/js/addOn/service-worker_assets/js/unregister-sw.js');\";\n\n                    saveFileOnline(\"sw.js\", swCode);\n\n                }\n            }\n\n            editFrameContent().find('body').on('focusin', 'service-worker-component .service-worker-enabled', function() {\n                $(this).data('val', $(this).val());\n            }).on('focusout', 'service-worker-component .service-worker-enabled', function(){\n                var prev = $(this).data('val');\n                var current = $(this).val();\n                var elem = selectedElement();\n\n                elem.attr(\"data-value\", current);\n\n                if (prev != current) {\n\n                    showHideServiceWorkerMessages(current);\n\n                    undoManager.add({\n                        undo: function () {\n                            showIfHidden(elem);\n                            elem.val(prev);\n                            elem.attr(\"data-value\", prev);\n                            showHideServiceWorkerMessages(prev);\n                            resetBreadcrumbAndProps(elem, false);\n                        },\n                        redo: function () {\n                            showIfHidden(elem);\n                            elem.val(current);\n                            elem.attr(\"data-value\", current);\n                            showHideServiceWorkerMessages(current);\n                            resetBreadcrumbAndProps(elem, false);\n\n                        }\n                    });\n                    undoRedoStatus();\n                }\n            }).on('change', 'service-worker-component .service-worker-enabled', function(){\n                showHideServiceWorkerMessages($(this).val());\n            });\n\n        </script>\n        <style>\n                service-worker-component{\n                    padding: 19px 0px !important;\n                    background-color: #ffffff !important;\n                    display: none;\n                }\n\n                service-worker-component .ag-focus{\n                    outline-style: solid !important;\n                }\n\n                service-worker-component > div {\n                    display: block !important;\n                    padding: 8px 20px 15px 20px !important;\n                    background-color: #f2f2f2 !important;\n                    margin: 0px 30px 30px 30px !important;\n                    border: 1px solid #d6d6d6 !important;\n                    max-width: 480px !important;\n                }\n\n                service-worker-component > div:first-child {\n                    margin-top: 15px !important;\n                }   \n\n                service-worker-component label {\n                    display: block !important;\n                    font-weight: bold !important;\n                    font-size: 13px !important;\n                    padding: 4px 0px !important;\n                    margin: 30px 0px 0px 0px !important;\n                    color: #000000 !important;\n                }\n\n                service-worker-component div label:first-child {\n                    margin-top: 0px !important;\n                }\n\n                service-worker-component input::-webkit-input-placeholder {\n                    font-weight: normal !important;\n                    color: #b1b1b1 !important;\n                }\n\n                service-worker-component input::-moz-placeholder {\n                    font-weight: normal !important;\n                    color: #b1b1b1 !important;\n                }\n\n                service-worker-component input:-ms-input-placeholder {\n                    font-weight: normal !important;\n                    color: #b1b1b1 !important;\n                }\n\n                service-worker-component input:-moz-placeholder {\n                    font-weight: normal !important;\n                    color: #b1b1b1 !important;\n                }\n\n                service-worker-component input, service-worker-component select {\n                    display: block !important;\n                    width: 100% !important;\n                    padding: 5px 9px !important;\n                    font-size: 13px !important;\n                    line-height: 1.5 !important;\n                    color: #333333 !important;\n                    background-color: #fff !important;\n                    background-clip: padding-box !important;\n                    border: 1px solid #ced4da !important;\n                    border-radius: 0px !important;\n                    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out !important;\n                    font-weight: 600 !important;\n                }\n\n                service-worker-component input:focus, service-worker-component select:focus {\n                    color: #495057 !important;\n                    background-color: #fff !important;\n                    border-color: #80bdff !important;\n                    outline: 0 !important;\n                    box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25) !important;\n                }\n\n\n                service-worker-component small {\n                    font-size: 13px !important;\n                    font-weight: 400 !important;\n                    display: block !important;\n                    margin-top: .25rem !important;\n                    color: #6c757d !important;\n                }\n\n                service-worker-component input {\n                    width: 100% !important;\n                }\n\n                 service-worker-component button{\n                     cursor: pointer !important;\n                 }\n\n\n                service-worker-component .web-service-worker{\n                    margin-bottom: 23px !important;\n                    border: 1px solid #000000 !important;\n                }\n\n\n                service-worker-component .sw-preview-message{        \n                    font-weight: 600 !important;\n                    font-size: 14px !important;\n                    padding: 15px !important;\n                    color: #000000 !important;\n\n                }\n\n                service-worker-component .sw-preview-message span {\n                    border-bottom: 1px solid #666666 !important;\n                    cursor: pointer !important;\n                }\n\n                service-worker-component .sw-preview-message span:hover {\n                    color: #808080 !important;\n                    border-bottom-color: #808080 !important;\n                }\n\n                service-worker-component .sw-code-template {\n                    background: #f5f5f5 !important;\n                    overflow: auto !important;\n                    width: 100% !important;\n                    padding: 10px 1px 1px 10px !important;\n                    max-width: 92% !important;\n                    border: 1px dashed #c5c5c5 !important;\n                }\n\n                service-worker-component .sw-code-template * {\n                    -webkit-touch-callout: text !important;\n                    -webkit-user-select: text !important;\n                    -khtml-user-select: text !important;\n                    -moz-user-select: text !important;\n                    -ms-user-select: text !important;\n                    user-select: text !important;\n                }\n\n                service-worker-component .hideme {\n                    display: none !important;\n                }\n        </style>\n    </div>\n    <div class=\"addButtons\">\n        <script>\n\n            addCustomButton(inEditor, \"serviceWorker\", \"Service Worker\", \"\", \"\", \"body\", \"body.ag-body-height-ton\");\n\n            inEditor.find(\"#serviceWorker\").click(function (event) {\n                $(\"#vis-content-service-worker\").click();\n                event.stopPropagation();\n            });\n        </script>\n    </div>\n    <div class=\"whenInHideMode\">\n        <script>\n            if (elm.is(\"service-worker-component\")) {\n                // Add static data to the form\n                // Why? because theres no need to save this in the database!\n\n                if (elm.find(\"label\").length == 0) {\n\n                    if ($(\"#livePreview\").hasClass(\"live-on\") == false){\n                        elm.append(\"<div class='sw-preview-message'>You can only test this Service Worker using <span>Live Preview</span></div>\");\n                    }\n\n\n                    elm.find(\".service-worker-enabled\").before(\"<label>Enable Service Worker:</label>\");\n\n                    elm.find(\".service-worker-enabled\").html('<option value=\"yes\">Yes</option><option value=\"no\">No</option>');\n\n                    elm.append('<div class=\"sw-code-template\"><pre style=\"margin: 0; line-height: 125%; padding-bottom: 10px; font-size: 13px;\"><span style=\"color: #008800; font-style: italic;\">// This &quot;Service Worker&quot; code will be added to your app.</span><br/><br/><span style=\"color: #008800;  font-style: italic;\">// The code will be used to make your app work offline and improve the performance of your app.</span><br/><br/>importScripts(<span style=\"color: #0000FF\">&#39;https://storage.googleapis.com/workbox-cdn/releases/3.2.0/workbox-sw.js&#39;</span>);<br/><br/>workbox.skipWaiting();<br/>workbox.clientsClaim();<br/><br/>workbox.precaching.precacheAndRoute([{...}]);<br/><br/>workbox.routing.registerRoute(<br/><span style=\"color: #0000FF; padding-left: 30px;\">/.*\\.(?:css|ejs|eot|js|otf|ps|ts|ttf|webp|woff|woff2).*/</span>,<br/><span style=\"padding-left: 30px;\">workbox</span>.strategies.cacheFirst({<br/><span style=\"padding-left: 60px;\">cacheName</span><span style=\"color: #f92672\">:</span><span style=\"color: #0000FF\">&#39;external-scripts&#39;</span>,<br/><span style=\"padding-left: 60px;\">plugins</span><span style=\"color: #f92672\">:</span>[<br/><span style=\"font-weight: bold; padding-left: 90px;\">new </span>workbox.expiration.Plugin({maxEntries<span style=\"color: #f92672\">: </span><span style=\"font-weight: bold;\">400</span>}),<br/><span style=\"font-weight: bold; padding-left: 90px;\">new </span>workbox.cacheableResponse.Plugin({statuses<span style=\"color: #f92672\">: </span>[<span style=\"font-weight: bold;\">0</span>, <span style=\"font-weight: bold;\">200</span>]})<br/><span style=\"padding-left: 60px;\">]</span><br/><span style=\"padding-left: 30px;\">})</span><br/>);<br/><br/>workbox.routing.registerRoute(<br/><span style=\"color: #0000FF; padding-left: 30px;\">/.*\\.(?:bmp|eps|gif|ico|jpeg|jpg|mid|midi|pict|pls|png|svg|svgz|swf|tif).*/</span>,<br/><span style=\"padding-left: 30px;\">workbox</span>.strategies.cacheFirst({<br/><span style=\"padding-left: 60px;\">cacheName</span><span style=\"color: #f92672\">:</span><span style=\"color: #0000FF\">&#39;external-media&#39;</span>,<br/><span style=\"padding-left: 60px;\">plugins</span><span style=\"color: #f92672\">:</span>[<br/><span style=\"font-weight: bold; padding-left: 90px;\">new </span>workbox.expiration.Plugin({maxEntries<span style=\"color: #f92672\">: </span><span style=\"font-weight: bold;\">400</span>}),<br/><span style=\"font-weight: bold; padding-left: 90px;\">new </span>workbox.cacheableResponse.Plugin({statuses<span style=\"color: #f92672\">: </span>[<span style=\"font-weight: bold;\">0</span>, <span style=\"font-weight: bold;\">200</span>]})<br/><span style=\"padding-left: 60px;\">]</span><br/><span style=\"padding-left: 30px;\">})</span><br/>);<br/><br/>workbox.routing.registerRoute(<br/><span style=\"color: #0000FF; padding-left: 30px;\">/.*\\.(?:class|csv|doc|docx|jar|pdf|ppt|pptx|xls|xlsx).*/</span>,<br/><span style=\"padding-left: 30px;\">workbox</span>.strategies.cacheFirst({<br/><span style=\"padding-left: 60px;\">cacheName</span><span style=\"color: #f92672\">:</span><span style=\"color: #0000FF\">&#39;external-files&#39;</span>,<br/><span style=\"padding-left: 60px;\">plugins</span><span style=\"color: #f92672\">:</span>[<br/><span style=\"font-weight: bold; padding-left: 90px;\">new </span>workbox.expiration.Plugin({maxEntries<span style=\"color: #f92672\">: </span><span style=\"font-weight: bold;\">400</span>}),<br/><span style=\"font-weight: bold; padding-left: 90px;\">new </span>workbox.cacheableResponse.Plugin({statuses<span style=\"color: #f92672\">: </span>[<span style=\"font-weight: bold;\">0</span>, <span style=\"font-weight: bold;\">200</span>]})<br/><span style=\"padding-left: 60px;\">]</span><br/><span style=\"padding-left: 30px;\">})</span><br/>);<br/><br/>workbox.googleAnalytics.initialize();</pre></div>');\n\n\n                    var swComponents = elm.find(\".sw-preview-message, .sw-code-template\");\n\n                    if (elm.find(\".service-worker-enabled\").attr(\"data-value\") == \"yes\"){\n                        swComponents.removeClass(\"hideme\");\n                    }else{\n                        swComponents.addClass(\"hideme\");\n                    }\n                }\n\n                elm.find(\"select\").each(function() {\n                    $(this).val($(this).attr(\"data-value\"));\n                });\n            }\n        </script>\n    </div>\n    <div class=\"whenOutOfHideMode\">\n        <script>\n            if (elm.length == 1){\n                if (elm.is(\"service-worker-component\")) {\n                    // Remove static data from the form\n                    // Why? because theres no need to save this in the database!\n                    elm.find(\"label, small, .sw-preview-message, .sw-code-template\").remove();\n                    elm.find(\"input, select\").removeAttr(\"id\");\n                    elm.find(\"select\").each(function() {\n                        $(this).attr(\"data-value\", $(this).val());\n                        $(this).html(\"\");\n                    });\n                    elm.find(\"input[placeholder]\").removeAttr(\"placeholder\");\n                }\n            }\n        </script>\n    </div>\n    <div class=\"runActionOnPageSave\">\n        <script>\n\n            if (editFrameContent().find(\"service-worker-component\").find(\".service-worker-enabled\").attr(\"data-value\") == \"yes\"){\n\n\n                var rev = SparkMD5.hash((new Date().toString()));\n\n                var swCode = \"importScripts('https://storage.googleapis.com/workbox-cdn/releases/3.2.0/workbox-sw.js');\";\n                swCode += \"workbox.precaching.precacheAndRoute([\";\n                swCode += \"{'url': '/', 'revision': '\" + rev + \"'}\";\n\n                var htmlFiles = getUsedFiles(\"html\");\n\n                for (const fileName in htmlFiles) {\n                    if (htmlFiles.hasOwnProperty(fileName)) {\n                        swCode += \", {'url': '\" + htmlFiles[fileName] + \"', 'revision': '\" + rev + \"'}\";\n                    }\n                }\n\n                swCode += \"]);\";\n                swCode += \"importScripts('https://editor.bragndrop.com/assets/js/addOn/service-worker_assets/js/external-cache-script.js');\";\n\n                saveFileOnline(\"sw.js\", swCode);\n            }\n        </script>\n    </div>\n</div></div><div class=\"codeUsedForPublishing\"><script>myPage['serviceWorkerData'] = {}; \nif (pageClone.find(\"service-worker-component\").length > 0) {\n\n    var swComponent  = pageClone.find(\"service-worker-component\");\n    var serviceWorkerData = {};\n\n    serviceWorkerData[\"swEnabled\"] = swComponent.find(\".service-worker-enabled\").attr(\"data-value\");\n\n    myPage['serviceWorkerData'] = serviceWorkerData; \n\n    swComponent.remove();\n}</script></div><div class=\"onShowSourceCode\"><script>if (Object.keys(myPage['serviceWorkerData']).length > 0){\n\n    var serviceWorkerData = myPage['serviceWorkerData'];\n\n    var swEnabled = serviceWorkerData[\"swEnabled\"];\n\n    if (swEnabled == \"yes\") {\n\n        var swCode = \"<script>if('serviceWorker'in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('/sw.js').then(function(registration){if(!navigator.serviceWorker.controller){return;} var preventDevToolsReloadLoop;navigator.serviceWorker.addEventListener('controllerchange',function(event){if(preventDevToolsReloadLoop)return;preventDevToolsReloadLoop=true;try {window.parent.postMessage('reload','\"+homePage+\"');}catch(e) {}});}).catch(function(err){console.log('Service Worker registration failed: ',err);});});};<\\/script>\";\n\n        code = code.replace(/<\\/body>/i, \"\\n\" + swCode + \"\\n</body>\");\n    }\n\n}</script></div></div>"};