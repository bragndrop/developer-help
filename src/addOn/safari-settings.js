frame_data["safari-settings"] = {"xml":"<div title=\"safari-settings\"><div class=\"components\"><div title=\"safari-settings-component\">\n    <div class=\"allowed-XSS-code\" title=\"Allow safari-component when filtering for XSS\">\n        <script>\n            allowedXSS[\"tags\"].push(\"safari-component\");\n        </script>\n    </div>\n    <div class=\"runOnLoad\">\n        <script>\n\n            if (editFrameContent().find('safari-component').length == 0){\n\n                var appleIcons = \"\";\n\n                function appleIconsRows(href, size){\n                    appleIcons += '<tr><td><input type=\"text\" value=\"https://editor.bragndrop.com/assets/images/icons/' + href + '\"></td><td><input type=\"text\" value=\"' + size + '\"></td></tr>';\n                }\n\n                appleIconsRows(\"apple-touch-icon.png\", \"\");\n                appleIconsRows(\"apple-touch-icon-57x57.png\", \"57x57\");\n                appleIconsRows(\"apple-touch-icon-60x60.png\", \"60x60\");\n                appleIconsRows(\"apple-touch-icon-72x72.png\", \"72x72\");\n                appleIconsRows(\"apple-touch-icon-76x76.png\", \"76x76\");\n                appleIconsRows(\"apple-touch-icon-114x114.png\", \"114x114\");\n                appleIconsRows(\"apple-touch-icon-120x120.png\", \"120x120\");\n                appleIconsRows(\"apple-touch-icon-144x144.png\", \"144x144\");\n                appleIconsRows(\"apple-touch-icon-152x152.png\", \"152x152\");\n                appleIconsRows(\"apple-touch-icon-180x180.png\", \"180x180\");\n\n                editFrameContent().find(\"body\").append('<safari-component id=\"safari-settings\"><div><input type=\"text\" class=\"safari-title\"><select class=\"safari-hide-interface-components\" data-value=\"no\"></select><select class=\"safari-status-bar\" data-value=\"default\"></select><select class=\"safari-detect-tel\" data-value=\"yes\"></select></div><div><table class=\"safari-icons\"><tbody>' + appleIcons + '</tbody></table></div></safari-component>');\n\n            }else{\n\n                editFrameContent().find(\"safari-component\").find(\"label, small, thead, .safari-icon-remove-row, .safari-icon-add-row\").remove();\n                editFrameContent().find(\"safari-component\").find(\"input, select\").removeAttr(\"id\"); editFrameContent().find(\"safari-component\").find(\"select\").each(function() {\n                    $(this).html(\"\");\n                }); \n                editFrameContent().find(\"safari-component\").find(\"input[placeholder]\").removeAttr(\"placeholder\");\n            }\n\n\n            tagReName(\"Safari Settings\", \"safari-component\");\n\n            tagReName(\"location\", \".safari-icons td:nth-child(1) input\");\n            tagReName(\"size\", \".safari-icons td:nth-child(2) input\");\n\n            designSetting(\"noCopy\", \"safari-component, safari-component input, safari-component select\");\n            designSetting(\"notDraggable\", \"safari-component, safari-component input, safari-component select\");\n            designSetting(\"notDroppable\", \"safari-component, safari-component input, safari-component select\");\n\n            designSetting(\"noRemove\", \"safari-component, safari-component input, safari-component select\");\n            designSetting(\"noMove\", \"safari-component input, safari-component select\");\n            designSetting(\"disableCustomButtons\", \"safari-component input, safari-component select\");\n\n            designSetting(\"dontAddTextTo\", \"safari-component label, safari-component th, safari-component button\");\n\n            designSetting(\"unTouchElement\", \"safari-component div, safari-component label, safari-component label *, safari-component small, safari-component table, safari-component thead, safari-component th, safari-component tbody, safari-component tr, safari-component td, safari-component button, safari-component span\");\n\n\n            designSetting(\"hiddenContent\", \"safari-component\");\n\n            designSetting(\"disablePropInspector\", \"safari-component, safari-component *\");\n\n            editFrameContent().find('body').on('focusin', 'safari-component select', function() {\n                $(this).data('val', $(this).val());\n            }).on('focusout', 'safari-component select', function(){\n                var prev = $(this).data('val');\n                var current = $(this).val();\n                var elem = selectedElement();\n\n                elem.attr(\"data-value\", current);\n\n                if (prev != current) {\n\n\n                    undoManager.add({\n                        undo: function () {\n                            showIfHidden(elem);\n                            elem.val(prev);\n                            elem.attr(\"data-value\", prev);\n                            resetBreadcrumbAndProps(elem, false);\n                        },\n                        redo: function () {\n                            showIfHidden(elem);\n                            elem.val(current);\n                            elem.attr(\"data-value\", current);\n                            resetBreadcrumbAndProps(elem, false);\n\n                        }\n                    });\n                    undoRedoStatus();\n                }\n            });\n\n            editFrameContent().find('body').on('click', 'safari-component .safari-icon-remove-row button', function() {\n\n                var currentRow = $(this).closest(\"tr\");\n                var rowAttachInfo = reAttachHow(currentRow);\n                var elem = currentRow.find(\"input\").eq(0);\n                currentRow.detach();\n\n                undoManager.add({\n                    undo: function () {\n                        reAttachNow(rowAttachInfo);\n                        showIfHidden(elem);\n                        resetBreadcrumbAndProps(elem, false);\n                    },\n                    redo: function () {\n                        showIfHidden(elem);\n                        currentRow.detach();\n                        resetBreadcrumbAndProps(elem.closest(\"safari-component\"), false);\n\n                    }\n                });\n                undoRedoStatus();\n            });\n\n            editFrameContent().find('body').on('click', 'safari-component .safari-icon-add-row button', function() {\n\n                var targetTable = $(this).parent().parent().find(\"tbody\");\n                var emptyRow;\n\n                targetTable.each(function() {\n                    $(this).find(\"tr\").each(function() {\n                        var rowVal = \"\"; \n                        $(this).find(\"input\").each(function() {\n                            rowVal = rowVal + $(this).val();\n                        });\n\n                        if (rowVal == \"\"){\n                            emptyRow = $(this);\n                            return false;\n                        }\n                    });\n                });\n\n                if (typeof emptyRow === \"undefined\") {\n\n                    var newRow = targetTable.append('<tr class=\"ag-new-row\"><td><input type=\"text\"></td><td><input type=\"text\"></td><td class=\"safari-icon-remove-row\"><button type=\"button\"><span class=\"fa fa-times\"></span></button></td></tr>');\n\n\n                    targetTable.find(\".ag-new-row\").wrap(\"<div class='newStuff'></div>\");\n\n                    runUndoAddNew(false);\n                    var ifram = editFrameContent();\n                    finishNewElem(ifram, false, false);\n\n                    setTimeout(function(){ \n                        targetTable.find(\".ag-new-row\").find(\"input\").eq(0).click();\n                        targetTable.find(\".ag-new-row\").removeClass(\"ag-new-row\");\n                    }, 150);\n\n                }else{\n\n                    setTimeout(function(){ \n                        emptyRow.find(\"input\").eq(0).click();\n                    }, 100);\n                }\n\n            });\n\n            editFrameContent().find('body').on('click', 'safari-component .safari-icons td:nth-child(1) input', function(event) {\n\n                var elem = $(this);\n\n                // \"openImageGallery\" is a function used to open the image gallery\n                // you must pass an array of affected elements (with a target attribute) for the image url\n                openImageGallery([\n                    {\n                        \"element\": elem,\n                        \"attribute\": \"value\"\n                    }\n                ]);\n\n\n\n                $('#ImageGallery').off('click', '.thumbnail');\n\n                $('#ImageGallery').on('click', '.thumbnail', function (event) {\n\n                    if ($(this).hasClass(\"imageActive\") == false) {\n\n                        // \"currentImage\" is an internal variable that tracks the active image url\n                        var oldImage = currentImage;\n\n                        // \"getSelectedImage\" is a function which grabs the url of the selected image\n                        var newImage = getSelectedImage($(this));\n\n                        showLoad();\n\n                        var imageInfo = new Image();\n                        imageInfo.src = newImage;\n\n                        var imageLoadTimer = setInterval(function(){\n                            if (imageInfo.width > 0){\n                                clearInterval(imageLoadTimer);\n                                undoRedosafariIconChange(elem, oldImage, newImage, imageInfo);\n                                hideLoad();\n                            }\n                        }, 50);\n\n                    }\n\n                });\n\n\n                $('#UpdateImageURLviaInputBox').off('click');\n\n                $('#UpdateImageURLviaInputBox').on('click', function (event) {\n\n                    if (currentImage != $(\"#ImageURLInputBox\").val()) {\n\n                        // \"currentImage\" is an internal variable that tracks the active image url\n                        var oldImage = currentImage;\n\n                        // \"#ImageURLInputBox\" is the input box were the user enters the img URL\n                        var newImage = $(\"#ImageURLInputBox\").val();\n\n                        showLoad();\n\n                        var imageInfo = new Image();\n                        imageInfo.src = newImage;\n\n                        var imageLoadTimer = setInterval(function(){\n                            if (imageInfo.width > 0){\n                                clearInterval(imageLoadTimer);\n                                undoRedosafariIconChange(elem, oldImage, newImage, imageInfo);\n                                hideLoad();\n                            }\n                        }, 50);\n\n\n                    }\n\n                    $('#SelectImageModal').modal('hide');\n\n                });\n\n                function undoRedosafariIconChange(elem, oldImage, newImage, imageInfo) {\n\n                    elem.val(newImage);\n\n                    var iconSizeInput = elem.closest(\"td\").next().find(\"input\");\n\n                    var oldSize = iconSizeInput.val();\n                    var newSize = imageInfo.width + \"x\" + imageInfo.height;\n                    iconSizeInput.val(newSize);\n\n                    undoManager.add({\n                        undo: function () {\n                            showIfHidden(elem);\n                            elem.val(oldImage);\n                            iconSizeInput.val(oldSize);\n                            resetBreadcrumbAndProps(elem, false);\n                        },\n                        redo: function () {\n                            showIfHidden(elem);\n                            elem.val(newImage);\n                            iconSizeInput.val(newSize);\n                            resetBreadcrumbAndProps(elem, false);\n\n                        }\n                    });\n\n                    undoRedoStatus();\n                }\n                event.stopPropagation();\n            });\n        </script>\n        <style>\n                safari-component{\n                    padding: 19px 0px !important;\n                    background-color: #ffffff !important;\n                    display: none;\n                }\n\n                safari-component .ag-focus{\n                    outline-style: solid !important;\n                }\n\n                safari-component > div {\n                    display: block !important;\n                    padding: 8px 20px 15px 20px !important;\n                    background-color: #f2f2f2 !important;\n                    margin: 0px 30px 30px 30px !important;\n                    border: 1px solid #d6d6d6 !important;\n                    max-width: 480px !important;\n                }\n\n                safari-component > div:first-child {\n                    margin-top: 15px !important;\n                }   \n\n                safari-component label {\n                    display: block !important;\n                    font-weight: bold !important;\n                    font-size: 13px !important;\n                    padding: 4px 0px !important;\n                    margin: 30px 0px 0px 0px !important;\n                    color: #000000 !important;\n                }\n\n                safari-component div label:first-child {\n                    margin-top: 0px !important;\n                }\n\n                safari-component input::-webkit-input-placeholder {\n                    font-weight: normal !important;\n                    color: #b1b1b1 !important;\n                }\n\n                safari-component input::-moz-placeholder {\n                    font-weight: normal !important;\n                    color: #b1b1b1 !important;\n                }\n\n                safari-component input:-ms-input-placeholder {\n                    font-weight: normal !important;\n                    color: #b1b1b1 !important;\n                }\n\n                safari-component input:-moz-placeholder {\n                    font-weight: normal !important;\n                    color: #b1b1b1 !important;\n                }\n\n                safari-component input, safari-component select {\n                    display: block !important;\n                    width: 100% !important;\n                    padding: 5px 9px !important;\n                    font-size: 13px !important;\n                    line-height: 1.5 !important;\n                    color: #333333 !important;\n                    background-color: #fff !important;\n                    background-clip: padding-box !important;\n                    border: 1px solid #ced4da !important;\n                    border-radius: 0px !important;\n                    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out !important;\n                    font-weight: 600 !important;\n                }\n\n                safari-component input:focus, safari-component select:focus {\n                    color: #495057 !important;\n                    background-color: #fff !important;\n                    border-color: #80bdff !important;\n                    outline: 0 !important;\n                    box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25) !important;\n                }\n\n                safari-component .safari-icons td:nth-child(1) input {\n                    direction: rtl !important;\n                }\n\n                safari-component .safari-icons td:nth-child(1) input.ag-focus {\n                    direction: ltr !important;\n                }\n\n                safari-component small {\n                    font-size: 13px !important;\n                    font-weight: 400 !important;\n                    display: block !important;\n                    margin-top: .25rem !important;\n                    color: #6c757d !important;\n                }\n\n                safari-component table, safari-component tr, safari-component input {\n                    width: 100% !important;\n                }\n                \n                safari-component table {\n                    background: #f2f2f2 !important;\n                }\n                \n                safari-component tbody tr {\n                    border-top: 1px solid #d2d2d2;\n                    background: #f2f2f2 !important;\n                }\n\n                safari-component td{\n                    padding: 4px 1px !important;\n                    color: #000000 !important;\n                    background: #f2f2f2 !important;\n                }\n\n                safari-component .safari-icon-remove-row button{\n                    width: 32px !important;\n                }\n\n                safari-component .safari-icon-remove-row button{\n                    width: 30px !important;\n                    height: 30px !important;\n                    background: #f2f2f2 !important;\n                    border: 0px !important;\n                    color: #424242 !important;\n                 }\n\n                 safari-component .safari-icon-add-row button{\n                     background: #dedede !important;\n                     border: 1px solid #a9a9a9 !important;\n                     margin: 4px 0px 0px 1px !important;\n                 }\n\n                 safari-component button{\n                     cursor: pointer !important;\n                     color: #000000 !important;\n                 }\n\n                safari-component th {\n                    padding: 8px 0px 3px 0px !important;\n                    font-size: 12px !important;\n                    color: #555555 !important;\n                }\n\n                safari-component .safari-settings{\n                    margin-bottom: 23px !important;\n                    border: 1px solid #000000 !important;\n                }\n        </style>\n    </div>\n    <div class=\"addButtons\">\n        <script>\n\n            addCustomButton(inEditor, \"safariSetting\", \"Safari Settings\", \"\", \"\", \"body\", \"body.ag-body-height-ton\");\n\n            inEditor.find(\"#safariSetting\").click(function (event) {\n                $(\"#vis-content-safari-settings\").click();\n                event.stopPropagation();\n            });\n        </script>\n    </div>\n    <div class=\"whenInHideMode\">\n        <script>\n            if (elm.is(\"safari-component\")) {\n                // Add static data to the form\n                // Why? because theres no need to save this in the database!\n\n                if (elm.find(\"label\").length == 0) {\n\n                    elm.find(\".safari-title\").before(\"<label>Launch Icon Title:</label>\");\n\n                    elm.find(\".safari-hide-interface-components\").before(\"<label>Hiding Safari User Interface Components:</label>\");\n                    elm.find(\".safari-hide-interface-components\").html('<option value=\"no\">No</option><option value=\"yes\">Yes</option>');\n\n                    elm.find(\".safari-status-bar\").before(\"<label>Status Bar Appearance:</label>\");\n                    elm.find(\".safari-status-bar\").html('<option value=\"default\">default</option><option value=\"black\">black</option><option value=\"black-translucent\">black-translucent</option>');\n\n                    elm.find(\".safari-detect-tel\").before(\"<label>Automatic detection of possible phone numbers:</label>\");\n                    elm.find(\".safari-detect-tel\").html('<option value=\"no\">No</option><option value=\"yes\">Yes</option>');\n\n\n\n                    elm.find(\".safari-icons\").before(\"<label>Apple Touch Icons <small>(WxH) - 120x120, 152x152, 180x180, 167x167</small></label>\");\n\n                    elm.find(\".safari-icons\").prepend(\"<thead><tr><th style='width: 75%'>location</th><th>size</th></tr></thead>\");\n\n\n                    elm.find(\"table tbody tr\").each(function() {\n                        if ($(this).find(\".safari-icon-remove-row\").length == 0){\n                            $(this).append('<td class=\"safari-icon-remove-row\"><button type=\"button\"><span class=\"fa fa-times\"></span></button></td>');\n                        }\n                    });\n\n                    elm.find(\"table\").after('<div class=\"safari-icon-add-row\"><button type=\"button\">Add another...</button></div>');\n\n                }\n\n                elm.find(\"select\").each(function() {\n                    $(this).val($(this).attr(\"data-value\"));\n                });\n            }\n        </script>\n    </div>\n    <div class=\"whenOutOfHideMode\">\n        <script>\n            if (elm.length == 1){\n                if (elm.is(\"safari-component\")) {\n                    // Remove static data from the form\n                    // Why? because theres no need to save this in the database!\n                    elm.find(\"label, small, thead, .safari-icon-remove-row, .safari-icon-add-row\").remove();\n                    elm.find(\"input, select\").removeAttr(\"id\");\n                    elm.find(\"select\").each(function() {\n                        $(this).attr(\"data-value\", $(this).val());\n                        $(this).html(\"\");\n                    });\n                    elm.find(\"input[placeholder]\").removeAttr(\"placeholder\");\n                }   \n            }\n        </script>\n    </div>\n</div>\n</div><div class=\"codeUsedForPublishing\"><script>myPage['safariData'] = {}; \nif (pageClone.find(\"safari-component\").length > 0) {\n\n    var safariComponent  = pageClone.find(\"safari-component\");\n    var safariData = {};\n\n    var safariTitle = safariComponent.find(\".safari-title\").val(); \n    if (safariTitle != \"\"){\n        safariData[\"safari-title\"] = '<meta name=\"apple-mobile-web-app-title\" content=\"' + escapeHtml(safariTitle) + '\">';\n    }else{\n        safariData[\"safari-title\"] = '';\n    }\n\n    var safariHideIC = safariComponent.find(\".safari-hide-interface-components\").attr(\"data-value\");\n    if (safariHideIC == \"yes\"){\n        safariData[\"safari-hide-interface-components\"] = '<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">';\n    }else{\n        safariData[\"safari-hide-interface-components\"] = '';\n    }\n\n\n\n    var safariStatusBar = safariComponent.find(\".safari-status-bar\").attr(\"data-value\");\n    safariData[\"safari-status-bar\"] = '<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"' + safariStatusBar + '\">';\n\n\n    var safariDetectTel = safariComponent.find(\".safari-detect-tel\").attr(\"data-value\");\n    if (safariDetectTel == \"no\"){\n        safariData[\"safari-detect-tel\"] = '<meta name=\"format-detection\" content=\"telephone=no\">';\n    }else{\n        safariData[\"safari-detect-tel\"] = '';\n    }\n\n    safariData[\"appleIcons\"] = \"\";\n\n    safariComponent.find(\".safari-icons\").find(\"tbody\").find(\"tr\").each(function() {\n\n        var appleIconLink = \"\";\n\n        if ($(this).find(\"input\").eq(0).val().replace(/\\s/g, '') != \"\"){\n\n            var iconHref = escapeHtml($(this).find(\"input\").eq(0).val());\n\n            appleIconLink += '<link rel=\"apple-touch-icon\" href=\"' + iconHref + '\"';\n\n            if ($(this).find(\"input\").eq(1).val().replace(/\\s/g, '') != \"\"){\n                var iconSize = escapeHtml($(this).find(\"input\").eq(1).val());\n\n                appleIconLink += ' sizes=\"' + iconSize + '\"';\n            }\n\n            appleIconLink += '>' + '\\n';\n        }\n\n        safariData[\"appleIcons\"] += appleIconLink;\n    });\n\n    myPage['safariData'] = safariData;\n    safariComponent.remove();\n}</script></div><div class=\"onShowSourceCode\"><script>if (Object.keys(myPage['safariData']).length > 0){\n\n    var safariData = myPage['safariData'];\n\n    var safariCode = \"\\n\";\n\n    safariCode += safariData[\"safari-title\"];\n    safariCode += safariData[\"safari-hide-interface-components\"]; \n    safariCode += safariData[\"safari-status-bar\"];\n    safariCode += safariData[\"safari-detect-tel\"];\n    safariCode += safariData[\"appleIcons\"];\n\n    code = code.replace(/\\<head[\\s\\S]*?\\>/ig,function(h, m) { \n        return h + safariCode;\n    });\n\n}</script></div></div>"};